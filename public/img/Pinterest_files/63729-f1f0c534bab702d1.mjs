(self.modernJsonp=self.modernJsonp||[]).push([["63729"],{543407(e,t,r){r.d(t,{A:()=>a});var n,o=new Uint8Array(16);function a(){if(!n&&!(n="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"u">typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}},946927(e,t,r){r.d(t,{A:()=>i});let n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));let i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!("string"==typeof r&&n.test(r)))throw TypeError("Stringified UUID is invalid");return r}},418562(e,t,r){r.d(t,{A:()=>a});var n=r(543407),o=r(946927);let a=function(e,t,r){var a=(e=e||{}).random||(e.rng||n.A)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=a[i];return t}return(0,o.A)(a)}},231309(e,t,r){r.d(t,{A:()=>o});var n=r(371882);function o(){return(0,n.y)()}},694134(e,t,r){r.d(t,{BB:()=>h,HG:()=>A,If:()=>E,L_:()=>g,ML:()=>v,Qe:()=>y,Uz:()=>I,XS:()=>R,ZB:()=>S,dE:()=>_,mt:()=>p,t0:()=>m,xc:()=>f});var n=r(960926),o=r(58882),a=r(702464),i=r(902560),s=r(441472),d=r(693117),c=r(883371),l=r(646844);function u(e){return"local"===e?(0,s.y1)():(0,d.V2)()}let p=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.Ic;return(t.getItem(n.rt)||o.Ic).map(e=>({...e,path:(0,i.A)(e.path)}))}catch(e){return(0,l.GV)("current_user_tracker.storage.get_visited_pages.error"),o.Ic}},_=(e,t,r="local")=>{try{let o=u(r);if(!o.accessAllowed)return;let s=(0,i.A)(e),d=[...p(r)],c=(0,a.Tb)(d,s,t,100);c!==d&&o.setItem(n.rt,c)}catch(e){(0,l.GV)("current_user_tracker.storage.add_visited_page.error")}},m=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.xg;return t.getItem(n.sO)||o.xg}catch(e){return(0,l.GV)("current_user_tracker.storage.get_completed_searches.error"),o.xg}},f=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...m(t)],i=(0,a.X5)(o,e,100);i!==o&&r.setItem(n.sO,i)}catch(e){(0,l.GV)("current_user_tracker.storage.add_completed_search.error")}},g=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...m(t)],i=(0,a.JF)(o,e);r.setItem(n.sO,i)}catch(e){(0,l.GV)("current_user_tracker.storage.remove_completed_search.error")}},A=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.vC;return t.getItem(n.S3)||o.vC}catch(e){return(0,l.GV)("current_user_tracker.storage.get_clickthrough_pins.error"),o.vC}},y=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...A(t)],i=(0,a.Yy)(o,e,100);i!==o&&r.setItem(n.S3,i)}catch(e){(0,l.GV)("current_user_tracker.storage.add_clickthrough_pin.error")}},R=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return 0;return parseInt(t.getItem(n.kL)||String(0),10)}catch(e){return(0,l.GV)("current_user_tracker.storage.get_download_count.error"),0}},E=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(n.kL,e.toString())}catch(e){(0,l.GV)("current_user_tracker.storage.set_download_count.error")}},h=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.BP;return t.getItem(n.KW)??o.BP}catch(e){return(0,l.GV)("current_user_tracker.storage.get_saved_pins.error"),o.BP}},I=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(n.KW,e)}catch(e){(0,l.GV)("current_user_tracker.storage.set_saved_pins.error")}},S=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return(0,o.Cj)();let{ts:r,sessionTimestamps:a}=t.getItem(n.hc)??{};if("number"==typeof r&&Array.isArray(a)&&a.length>0&&a.every(e=>"number"==typeof e))return{ts:r,sessionTimestamps:a};return(0,o.Cj)()}catch(e){return(0,l.GV)("current_user_tracker.storage.get_revisitation.error"),(0,o.Cj)()}},v=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(n.hc,(0,c.A)(e))}catch(e){(0,l.GV)("current_user_tracker.storage.set_revisitation.error")}}},702464(e,t,r){r.d(t,{JF:()=>c,Tb:()=>i,X5:()=>s,Yy:()=>d});var n=r(902560),o=r(883371);let a=(e,t,r)=>{let n=[t,...e];return n.length>r?n.slice(0,r):n},i=(e,t,r,i)=>{let s,d,c,l=(0,n.A)(t);return(s=e.length,d=(0,n.A)(l),c=s?(0,n.A)(e[0].path):"",s&&d===c)?e:a(e,(0,o.A)({path:l,pageType:r}),i)},s=(e,t,r)=>{var n;let i,s;return(n=t.query,s=(i=e.length)?e[0].query:"",i&&n===s)?e:a(e,(0,o.A)(t),r)},d=(e,t,r)=>{var n;let i,s;return(n=t.pinId,s=(i=e.length)?e[0].pinId:"",i&&n===s)?e:a(e,(0,o.A)(t),r)},c=(e,t)=>e.filter(e=>e.query!==t)},902560(e,t,r){r.d(t,{A:()=>o});var n=r(106149);function o(e){let t=(0,n.A)(e);return t?`/pin/${t}/`:e}},107792(e,t,r){r.d(t,{AK:()=>a,Qv:()=>n,Wm:()=>o,ZR:()=>d,c7:()=>i,he:()=>s});let n=36e5,o=864e5,a=6048e5,i=2592e6,s=26784e5,d=31536e6},528074(e,t,r){r.d(t,{A:()=>n});let n=r(679842).A},769178(e,t,r){r.d(t,{XC:()=>a,Z9:()=>o,a0:()=>n});let n=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,o=e=>window.innerHeight>=748&&n(e),a=()=>!("u"<typeof window)&&!!window.navigator&&(/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&"ontouchend"in document&&Math.min(window.screen.width,window.screen.height)>=700)},370590(e,t,r){r.d(t,{B1:()=>y,DX:()=>g,Te:()=>_,Zz:()=>p,bi:()=>f,f3:()=>A,uy:()=>m});var n=r(850607),o=r(960926),a=r(414491),i=r(441472),s=r(597911),d=r(144837),c=r(221077);let l="android-app://com.pinterest.twa",u="homescreen_icon",p=e=>["twa","cct","browser","webview"].includes(e),_=e=>{let t;return!!e&&((a.Jt(n.MD)||"").startsWith(l)||(e.document&&e.document.referrer||"").startsWith(l)||!!((t=e.location?.search)&&p((0,c.A)(t).twa_type)))},m=e=>{if(!e)return null;if(e.Windows)return"windows";if(e&&(e.document&&e.document.referrer||"").startsWith("app-info://platform/microsoft-store"))return"msft-store";if(_(e))return"android-twa";if(e.matchMedia&&(e.matchMedia("(display-mode: standalone)")?.matches||e.matchMedia("(display-mode: minimal-ui)")?.matches)&&e.navigator&&e.navigator.userAgent){let{userAgent:t}=e.navigator;if(t.includes("Chrome"))return"chrome";if(t.includes("Safari"))return"safari"}return"unknown"},f=e=>{let t=m(e);return!!(t&&"unknown"!==t)},g=(e,t)=>{if("unknown"!==t)switch(t){case"twa":return 3354;case"cct":return 3355;case"browser":return 3356;default:return null}switch(e){case"chrome":return 3351;case"safari":return 3352;default:return null}};function A(e,t){if(void 0===e)return"notEligible";if(!f(e)&&e.navigator&&e.navigator.userAgent){if(e.navigator.userAgent.includes("Windows NT 10.0"))return"windows";else if(t&&t())return"chrome"}return"notEligible"}let y=e=>{if(e)if((0,c.A)(e.location?.search).utm_source===u){let{hostname:t}=e.location;i.Ay.setItem(o.WZ,t)}else e.navigator.userAgent&&e.navigator.userAgent.includes("CrOS")&&(e=>{let t;if(!e)return;let r=i.Ay.getItem(o.WZ)||"";if(r!==e.location.hostname&&(t=Number(i.Ay.getItem(o.a1)),!(Date.now()-t<6e4))){let{pathname:t}=e.location,n=(0,d.A)(t,{utm_source:u}),a=(0,s.A)(n,void 0,r);i.Ay.setItem(o.a1,Date.now()),e.location.href=a}})(e)}},760906(e,t,r){r.d(t,{A:()=>n});let n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},458503(e,t,r){r.d(t,{A:()=>n});function n(e,t,r,o=0){if(-1===t||-1===r||t===r)return e;let a=r+o,i=t+o;if(a<0||a>=e.length||i<0||i>=e.length)return e;let s=[...e],d=s[i],c=i<a?1:-1;for(let t=i;t!==a;t+=c)s[t]=e[t+c];return s[a]=d,s}},233342(e,t,r){r.d(t,{I:()=>n});let n={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",CONTENT_TYPE_FILTER:"content_type_filter",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IDEAS_ROOT:"ideas_root",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SHOPPING_FILTER:"shopping_filter",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",URECS:"urecs",VANILLA_GUIDE:"guide",VIDEO:"video",VOICE_SEARCH:"voice_search"}},534907(e,t,r){r.d(t,{A:()=>a});var n=r(427575),o=r(182835);function a(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,o.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,o.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,o.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,o.fu)("mweb_service_worker.unregister_fail",{error:(0,n.A)(e,"message")})})})):Promise.resolve()}},106149(e,t,r){r.d(t,{A:()=>a});var n=r(326104),o=r(104456);let a=e=>{let t=/^\/pin\/([a-zA-Z0-9-]+)/,r=(0,o.A)(e);if(t.test(r.path)){let e=r.path.match(t);if(e)return(0,n.A)(e[1]).pinId||void 0}}},326104(e,t,r){r.d(t,{A:()=>n});function n(e){if((e||"").includes("--")){let t=e.split("--"),r=t.pop();return{text:t.join("--"),pinId:r}}return{text:"",pinId:e}}},38772(e,t,r){r.d(t,{A:()=>a});var n=r(144837),o=r(221077);let a=(e,t)=>{if(0===t.length)return e;let[r,a]=e.split("?"),i=Object.entries((0,o.A)(a)).filter(([e])=>!t.includes(e)).reduce((e,[t,r])=>({...e,[t]:r}),{});return(0,n.A)(r,i)}},990213(e,t,r){r.d(t,{e:()=>l,y:()=>c});var n=r(296540),o=r(632321),a=r(697384),i=r(622165),s=r(474848);let{Provider:d,get:c}=(0,a.A)("VideoPlayer");function l({children:e}){let{logContextEvent:t,logImpression:r}=(0,o.o)(),{checkExperiment:a}=(0,i.A)(),[c,l]=(0,n.useState)(!1),[u,p]=(0,n.useState)([]),[_,m]=(0,n.useState)([]),[f,g]=(0,n.useState)({}),A=a("web_ads_mrc_video_impression").anyEnabled,y=e=>{g(t=>({...t,[e]:!0}))},R=(0,n.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],r=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");A&&(t||r)&&p(t=>[...t,e].slice(-1e3))}},[A]),E=(0,n.useCallback)(e=>{18===e.eventType&&A&&m(t=>[...t,e].slice(-1e3))},[A]);(0,n.useEffect)(()=>{let e=u.filter(e=>{let{pinIdStr:r}=e.event_data.pinImpressions[0];return!f[r]||!A||(t((e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}})(e)),!1)});e.length!==u.length&&p(e)},[u,A,t,f]),(0,n.useEffect)(()=>{let e=_.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(f[t]&&A){let t=(e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null})(e);return t&&r(t),!1}return!0});e.length!==_.length&&m(e)},[_,A,r,f]);let h=(0,n.useMemo)(()=>({captionsEnabled:c,logMrcVideoAdImpressionOnPlay:E,logMrcVideoAdEventOnPlay:R,setCaptionsEnabled:l,setVideoPlayed:y,videosPlayed:f}),[c,R,E,f]);return(0,s.jsx)(d,{value:h,children:e})}},179146(e,t,r){r.d(t,{A:()=>a,B:()=>n});let{Provider:n,get:o}=(0,r(697384).A)("VerticalNav",{width:0,sideBarWidth:0,selectedNav:void 0,isPanelOpen:()=>!1,sideBarOpen:!1,updatePanelState:()=>{},togglePanelState:()=>{},isBoardCreateModalOpen:!1,setIsBoardCreateModalOpen:()=>{},handleSideBarLinkClick:()=>{}}),a=o},275386(e,t,r){r.d(t,{A:()=>o});var n=r(179146);function o(){let{width:e}=(0,n.A)();return e}},883371(e,t,r){r.d(t,{A:()=>n});let n=function(e){return{...e,ts:Date.now()}}},424762(e,t,r){r.d(t,{$:()=>f,A:()=>R});var n=r(435845),o=r(458503),a=r(110924),i=r(929301),s=r(35494),d=r(87220),c=r(415660),l=r(197472);let u=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>e?.url==="/v3/orientation/nux_creator_recommendations/"?"nux-creator-recommendations":e?.url==="/v3/users/me/interests/"?`recommended-interests:${e.data?.blend_type}`:e?.url===`/v3/usecases/${e.data?.use_case_id}/feed/`?"useCaseFeed":e?.url===`/v3/boards/${e.data?.board_id}/automagical/pins/`?`automagical-board-feed:${e.data?.board_id}`:e?.url===`/v3/aggregated_pin_data/${e.data?.aggregated_pin_data}/comments/`?`aggregated-comments:${e.data?.aggregated_pin_data}`:e?.url==="/v3/users/me/boards/archived/"?"archived-boards":"",AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentReplyFeedResource:e=>`${l.A.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItUserFeedResource:e=>`profile-tried:${e.username}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>`search:${(0,i.n1)(e)}`,BaseSearchResource:e=>`search:${(0,i.n1)(e)}`,SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},_={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:l.A.TRIED_IT_FEED,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?l.A.AGGREGATED_COMMENT_REPLIES:l.A.AGGREGATED_COMMENTS,id:t,reversed:!0}),ApiResource:({options:{url:e,data:t}})=>e===`/v3/usecases/${t?.use_case_id}/feed/`?{type:l.A.USE_CASE_TAB,id:t.use_case_id}:e===`/v3/boards/${t?.board_id}/automagical/pins/`?{type:l.A.AUTOMAGICAL_BOARD_FEED,id:t.board_id}:e===`/v3/aggregated_comments/${t.aggregated_comment}/replies/`?{type:t.isUnifiedComment?l.A.AGGREGATED_COMMENT_REPLIES:l.A.AGGREGATED_COMMENTS,id:t.aggregated_comment,reversed:!0}:e===`/v3/aggregated_pin_data/${t?.aggregated_pin_data}/comments/`?{type:l.A.AGGREGATED_COMMENTS,id:t.aggregated_pin_data}:null,BoardFeedResource:({options:{board_id:e}})=>({type:l.A.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:l.A.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:l.A.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:l.A.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t,filter_types:r}})=>({type:l.A.PROFILE_BOARDS,id:(0,s.A)(e,t,r)}),BaseSearchResource:({options:e,response:t})=>({type:l.A.SEARCH_PINS,id:(0,i.n1)(e),items:t.resource_response.data?.results||[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:l.A.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:l.A.TRIED_IT_FEED,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:l.A.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:l.A.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:l.A.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:l.A.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:l.A.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:l.A.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:l.A.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:l.A.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},m=(e,{pinId:t,oldFeedId:r,newFeedId:n})=>r===n?e:((e,{pinId:t,feedId:r})=>e[r]?{...e,[r]:[{type:"pin",id:t},...e[r]]}:e)(((e,{pinId:t,feedId:r})=>e[r]?{...e,[r]:e[r].filter(e=>"pin"!==e.type||e.id!==t)}:e)(e,{pinId:t,feedId:r}),{pinId:t,feedId:n}),f=(e,t)=>(0,n.A)(p,e)?p[e](t):null,g=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,A=(e,t)=>e.map(e=>{let{id:r,schema:n,type:o}=e;return"home_feed_tabs"===o?e:n?{id:r,type:n,trackingParams:"pin"===n?t.pins[r].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),y=(e,t,r)=>Object.keys(e).reduce((n,o)=>{let a=e[o]||[],i=a.filter(e=>{if(e.type!==t)return!0;if("reaction"===t){let t=e.id.lastIndexOf(":");return e.id.substring(0,t)!==r}return e.id!==r});return a.length!==i.length&&(n[o]=i),n},{...e}),R=(e={},t)=>{switch(t.type){case a.v6:case a.LB:{let{payload:r}=t,{resource:o,options:i,normalizedResponse:s,schema:u}=r;if(s&&(0,n.A)(p,o)){let r=((e,t,r)=>{let n=r||d.A[e];if(n===c.hm)return t.result;if(n===c.IL)return t.result.map(e=>({id:e,schema:"board"}));if(n===c.Xm)return t.result.map(e=>({id:e,schema:"user"}));if(n===c.D$)return t.result.map(e=>({id:e,schema:"invite"}));if(n===c.d9)return t.result.map(e=>({id:e,schema:"reaction"}));if("object"==typeof n){let e=Object.entries(n).find(([,e])=>e===c.hm);if(e)return t.result[e[0]]}return null})(o,s,u);if(r&&Array.isArray(r)){let n=p[o](i);if(!n)return e;if("BoardToolsFeedResource"===o||"SectionToolsFeedResource"===o)return{...e,[n]:r};if("UnifiedCommentsResource"===o){let o=A(r,s.entities);if(e[n]&&(a.v6||a.LB===t.type))return{...e,[n]:[...e[n],...o]};return{...e,[n]:o}}{let o=[...t.type===a.LB&&e[n]||[],...A(r,s.entities)];return{...e,[n]:o}}}}else{let{data:n}=r.response.resource_response;if(!r.options?.redux_normalize_feed)return e;let o=_[r.resource]({options:r.options,response:r.response});if(o){let{type:r,id:i,items:s,reversed:d}=o,c=(s||n||[]).filter(Boolean).map(e=>((e,t)=>{switch(e.type){case"story":return{id:e.id??"",type:"story",story_type:e.story_type??""};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===l.A.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:let r="useCaseFeed"===t&&"tracking_params"in e;return{type:"pin",id:e.id??"",...r&&{trackingParams:e.tracking_params}}}})(e,r));d&&(c=c.reverse());let u=`${r}:${i}`,p=e[u];if(p||t.type!==a.LB){let r=p||[],n=c;return t.type===a.LB&&(n=d?c.concat(r):r.concat(c)),{...e,[u]:n}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:r,feedId:n,itemType:a,targetItemId:i,sourceItemId:s}}=t,d=`${r}:${n}`,c=e[d]||[],u=-1,p=-1;if([l.A.BOARDFEED,l.A.BOARD_SECTION_PINS,l.A.BOARD_SECTIONS,"profileBoards"].includes(r)&&(u=c.findIndex(e=>e.type===a&&e.id===s),p=c.findIndex(e=>e.type===a&&e.id===i)),-1!==u&&-1!==p)return{...e,[d]:(0,o.A)(c,u,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:r,feedId:n,inverseSelection:o,itemType:a,itemIds:i=[]}}=t,s=`${r}:${n}`,d=e[s]||[];if(d&&d.length>0&&(r===l.A.BOARD_SECTION_PINS||r===l.A.BOARDFEED)){let t=d.filter(e=>{let t=i.includes(e.id);return!(e.type===a&&(o&&!t||!o&&t))}),r=!!t.find(e=>"pin"===e.type);return{...e,[s]:r?t:[]}}if(d&&d.length>0&&r===l.A.BOARD_SECTIONS||d&&d.length>0&&(r===l.A.AGGREGATED_COMMENTS||r===l.A.BOARDLESS_PINS||r===l.A.PROFILE_PINS_FEED||r===l.A.STORY_PINS_FEED||r===l.A.UNIFIED_COMMENTS||r===l.A.TRIED_IT_FEED||r===l.A.STORY_PIN_DATA)){let t=d.filter(e=>{let t=i.includes(e.id);return!(e.type===a&&t)});return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:r,feedId:n,itemType:o,itemIds:a=[],prepend:i}}=t,s=`${r}:${n}`,d=e[s]||[];if(d&&(r===l.A.BOARD_SECTION_PINS||r===l.A.BOARDFEED||r===l.A.BOARDLESS_PINS)){let t=a.map(e=>({id:e,type:o})),r=0;"story"===(d[0]||{}).type&&(r=1),"story"===(d[1]||{}).type&&(r=2);let n=[...d.slice(0,r),...t,...d.slice(r)];return{...e,[s]:n}}if(d&&r===l.A.BOARD_SECTIONS){let t=[...a].reverse().map(e=>({id:e,type:"boardsection"})),r=d?[...t,...d]:[...t];return{...e,[s]:r}}if(r===l.A.AGGREGATED_COMMENTS||r===l.A.AGGREGATED_COMMENT_REPLIES||r===l.A.PROFILE_PINS_FEED||r===l.A.STORY_PINS_FEED||r===l.A.UNIFIED_COMMENTS){let t=a.map(e=>({id:e,type:o})),r=d?[...i?t:d,...i?d:t]:t;return{...e,[s]:r}}if(r===l.A.TRIED_IT_FEED){let t=a.map(e=>({id:e,type:o})),r=d?[...t,...d]:t;return{...e,[s]:r}}break}case"FEED_INVALIDATE":{let{payload:{feedType:r,feedId:n}}=t,o=`${r}:${n}`;return e[o],{...e,[o]:null}}case"APPEND_FEED_ITEMS":{let{payload:{id:r,items:n,options:o}}=t,a=e[r];if(!a)return{...e,[r]:n};{let t;return t=o.isPrepend?a[0]&&"story"===a[0].type?[].concat(a[0],n,a.slice(1)):n.concat(a):a.concat(n),{...e,[r]:t}}}case"PIN_DELETE":{let{payload:{pinId:r}}=t;return y(e,"pin",r)}case"BOARD_ARCHIVE":{let{payload:{boardId:r,username:n}}=t,o=`profile-boards:${n??""}`;if(e[o])return{...e,[o]:e[o].filter(e=>e.id!==r)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:r}}=t,n="archived-boards";if(e[n])return{...e,[n]:e[n].filter(e=>e.id!==r)};break}case"BOARD_DELETE":{let{payload:{boardId:r}}=t;return y(e,"board",r)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:r}}=t;return y(e,"boardsection",r)}case"PINS_MOVE":{let{payload:{source:r,target:n,pinIds:o,userId:a}}=t,i=r.boardlessPins&&a&&`boardless-pins:${a}`||r.boardId&&g(r.boardId,r.sectionId),s=g(n.boardId,n.sectionId);return o.reduce((e,t)=>m(e,{pinId:t,oldFeedId:i,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:r,target:n,excludePinIds:o}}=t,a=g(r.boardId,r.sectionId),i=g(n.boardId,n.sectionId),s={...e,[a]:o.map(e=>({type:"pin",id:e}))};return delete s[i],s}case"PIN_EDIT":{let{payload:{pinId:r,boardId:n,sectionId:o="",source:{boardId:a,sectionId:i}}}=t;return m(e,{pinId:r,oldFeedId:g(a,i),newFeedId:g(n,o)})}case a.lI:if(u.has(t.payload.resource)){let r,n=t.payload.response.resource_response.data,{board:o}=n;if("quick_saves"===o.layout)r=`boardless-pins:${t.payload.options.user_id}`;else{let e=t.payload.options.section;r=e?`board-section-pins:${e}`:`boardfeed:${o.id}`}if(e[r]){let t={...e},o={id:n.id,type:"pin",trackingParams:n?.tracking_params};return t[r]=[o].concat(e[r]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){let r=t.payload.normalizedResponse.result,n=t.payload.normalizedResponse.entities.boardsections?.[r].board;if(!n)return e;let o=`board-sections:${n}`;if(e[o]){let t={...e};return t[o]=[{id:r,type:"boardsection"}].concat(e[o]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){let r={id:t.payload.normalizedResponse.result,type:"aggregatedcomment"},n={...e};for(let o of["aggregated-comments","unified-comments"]){let a=`${o}:${t.payload.options.objectId}`;e[a]&&(n={...n,[a]:[r].concat(n[a])})}return n}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){let r=`${l.A.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[r]:[...e[r]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){let{reaction_pin_id:r,reaction_type:n}=t.payload.options;if("reaction"===t.payload.options.action_type){let o=`reactions:${t.payload.options.pin_id}`,a={...e},i={id:`${r}:${t.payload.options.user_id}:${n}`,type:"reaction",trackingParams:void 0};return a[o]=[i].concat(e[o]),a}if("unreaction"===t.payload.options.action_type)return y(e,"reaction",`${r}:${t.payload.options.user_id}`)}}return e}},825261(e,t,r){r.d(t,{f:()=>R,R:()=>E});var n=r(97407),o=r(296540),a=r(918312),i=r(278106),s=r(369487),d=r(622165),c=r(534955);function l(e){let t={result:{kind:"Pending",promise:e},read:()=>(function(e){let{result:t}=e;switch(t.kind){case"Pending":throw t.promise;case"Ok":return t.value;case"Err":throw t.error;default:throw Error("Unexpected case")}})(t)};return e.then(e=>{t.result={kind:"Ok",value:e}}).catch(e=>{t.result={kind:"Err",error:e}}),t}function u(e){return{result:{kind:"Ok",value:e},read:()=>e}}var p=r(34412),_=r(576642),m=r(646844),f=r(474848);let g=(0,o.createContext)(null),A=/(^\/)|:|(\/$)/g,y=/\//g,R=({children:e})=>{(0,o.useEffect)(()=>{(0,n.A)("EntrypointContext","/pws/entrypoint-router/EntrypointContext.tsx")},[]);let t=(0,a.useRelayEnvironment)(),{checkExperiment:r}=(0,d.A)(),s=(0,c._8)(),l=(0,o.useRef)({}),u=(0,o.useCallback)(e=>{let{rootComponent:n,loadedValueState:o}=I(h(l.current,e),e,"Both",t,r,s);return"NotYetRendered"===o.performanceLoggingState.kind&&(o.performanceLoggingState={kind:"InitiallyRendered",initialRenderTime:Date.now()}),{rootComponent:n,onEntrypointDataLoaded:t=>{if("InitiallyRendered"===o.performanceLoggingState.kind){let r=Date.now();(0,m.N9)("entrypointRouter.routeTiming."+e.kind.replace(A,"").replace(y,"_"),r-o.performanceLoggingState.initialRenderTime,{sampleRate:.1,tags:t??{}}),o.performanceLoggingState={kind:"Complete"}}},loadedValue:o.loadedValue}},[r,t,s]),_=(0,i.Zp)(),R=(0,o.useCallback)(e=>{I(h(l.current,e),e,"Both",t,r,s),_((0,p.P)(e))},[_,r,t,s]),E=(0,o.useCallback)((e,n)=>{let o=h(l.current,e);"Both"===n&&I(o,e,n,t,r,s)},[r,t,s]),S=(0,o.useMemo)(()=>({loadAndReadDuringRender__INTERNAL:u,preload:E,imperativelyNavigate:R}),[u,R,E]);return(0,f.jsx)(g,{value:S,children:e})};function E(){let e=(0,o.use)(g);if(null==e)throw Error("Missing entrypoint context");return e}function h(e,t){let r=p.A[t.kind];if(null==r)throw Error("Unexpected missing route! Did you define it in routeMap.ts?");let n=r.loader();return e[t.kind]??={rootComponent:l(r.rootComponent()),loadedValueStates:{},loader:(0,s.isPromise)(n)?l(n):u(n)}}function I(e,t,r,n,o,a){var i;let s=JSON.stringify((0,_.A)(t.routeParams)),{loadedValueStates:d,rootComponent:c,loader:p}=e;return{rootComponent:c,loadedValueState:d[s]??=(i=t.kind,setTimeout(()=>{let e=d[s];null!=e&&(0,m.GV)("entrypointRouter.entrypointUse",{sampleRate:.1,tags:{routeName:i,usedInTime:"NotYetRendered"!==e.performanceLoggingState.kind}})},3e4),{loadedValue:function(e,t){let{result:r}=e;switch(r.kind){case"Pending":return l(r.promise.then(t));case"Ok":return u(t(r.value));case"Err":var n;return{result:{kind:"Err",error:n=r.error},read:()=>{throw n}};default:throw Error("Unexpected case")}}(p,e=>e({routeParams:t.routeParams,relayEnvironment:n,checkExperiment:o,requestContext:a})),performanceLoggingState:{kind:"NotYetRendered"}})}}},34412(e,t,r){r.d(t,{P:()=>a,A:()=>o});var n=r(278106);let o={"/collage-creation-tool":{loader:()=>Promise.all([r.e("35565"),r.e("31623")]).then(r.bind(r,713649)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("22029"),r.e("35565"),r.e("53102"),r.e("99696"),r.e("63435"),r.e("64115"),r.e("37101"),r.e("25893")]).then(r.bind(r,391827)).then(e=>e.default)},"/comparison/results":{loader:()=>r.e("27441").then(r.bind(r,906750)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("26774"),r.e("70231"),r.e("20223")]).then(r.bind(r,727267)).then(e=>e.default)},"/comparison/select/:id":{loader:()=>r.e("54555").then(r.bind(r,46439)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("26774"),r.e("70231"),r.e("28097")]).then(r.bind(r,506187)).then(e=>e.default)},"/ideas":{loader:()=>Promise.all([r.e("91796"),r.e("60441")]).then(r.bind(r,372139)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("650"),r.e("75546"),r.e("223")]).then(r.bind(r,73255)).then(e=>e.default)},"/pin/:id/analytics":{loader:()=>r.e("76719").then(r.bind(r,394790)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("53590"),r.e("88918"),r.e("85212"),r.e("55860"),r.e("19872"),r.e("52518"),r.e("44860"),r.e("26659"),r.e("69533")]).then(r.bind(r,4390)).then(e=>e.default)},"/today/":{loader:()=>r.e("15960").then(r.bind(r,638028)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("650"),r.e("20258"),r.e("75546"),r.e("51238")]).then(r.bind(r,240185)).then(e=>e.default)}};function a(e){return(0,n.tW)(e.kind,e.routeParams)}},576642(e,t,r){r.d(t,{A:()=>function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);let r=Object.keys(t).sort(),n={};for(let o=0;o<r.length;o++)n[r[o]]=e(t[r[o]]);return n}})},16389(e,t,r){r.d(t,{$:()=>i,x:()=>a});var n=r(296540),o=r(278106);let a=(0,n.createContext)(null);function i(){return(0,o.zy)()===(0,n.use)(a)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/63729-f1f0c534bab702d1.mjs.map